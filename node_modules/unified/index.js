function parseMarkdown(content) {
  const regex = /!\[[^\]]*\]\(([^)]+)\)/g;
  const nodes = [];
  let m;
  while ((m = regex.exec(content))) {
    nodes.push({
      type: 'image',
      url: m[1],
      position: { start: { offset: m.index }, end: { offset: regex.lastIndex } }
    });
  }
  return { type: 'root', children: nodes };
}

export function unified() {
  return {
    use() { return this; },
    parse(content) { return parseMarkdown(content); }
  };
}
